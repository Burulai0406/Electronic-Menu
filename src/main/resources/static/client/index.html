<!DOCTYPE html>
<html lang="kg">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Chai Caffe</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;600&display=swap" rel="stylesheet" />
    <style>
        :root{
          --bg: #FEFFE7;
          --text: #1F3B2F;
          --accent: #FED2A0;
        }
        body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text); justify-content:center; -webkit-font-smoothing:antialiased}
        h1,h2,h3{font-family:'Playfair Display',serif}
        .btn-primary{background:var(--accent);color:var(--text);transition:transform .18s ease,box-shadow .18s ease}
        .btn-primary:hover{transform:scale(1.03);box-shadow:0 8px 20px rgba(0,0,0,.12)}

        .fade-slide-enter{opacity:0;transform:translateY(18px)}
        .fade-slide-enter.fade-slide-enter-active{opacity:1;transform:none;transition:opacity .36s ease,transform .36s ease}
        .fade-slide-leave{opacity:1;transform:none}
        .fade-slide-leave.fade-slide-leave-active{opacity:0;transform:translateY(-10px);transition:opacity .28s ease,transform .28s ease}

        .menu-card{transition:transform .22s ease,box-shadow .22s ease}
        .menu-card:hover{transform:translateY(-6px);box-shadow:0 12px 30px rgba(31,59,47,.08)}
        /* responsive adjustments */
        @media (max-width:640px){
          .h-96{height:360px}
        }

header nav {
    display: flex;
    justify-content: center;
    flex-grow: 1;
}


@media (max-width: 768px) {
    header nav {
        position: fixed;
        top: 0; left: 0; right: 0;
        background: rgba(255, 255, 255, 0.97);
        backdrop-blur-lg;
        flex-direction: column;
        align-items: center;
        padding-top: 6rem;
        gap: 2rem;
        transform: translateY(-100%);
        transition: transform 0.4s ease;
        z-index: 40;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }

    header nav.open {
        transform: translateY(0);
    }

    header nav button,
    header nav select {
        width: 80%;
        max-width: 300px;
        padding: 1rem;
        font-size: 1.1rem;
        text-align: center;
    }
}


.burger span {
    display: block;
    width: 28px;
    height: 3px;
    background: #1F3B2F;
    margin: 6px 0;
    transition: 0.3s;
    border-radius: 2px;
}

.burger.open span:nth-child(1) { transform: rotate(45deg) translate(9px, 9px); }
.burger.open span:nth-child(2) { opacity: 0; }
.burger.open span:nth-child(3) { transform: rotate(-45deg) translate(7px, -7px); }

#burger.open ~ #closeBurger,
#burger:not(.open) ~ #closeBurger {
    opacity: 0;
    pointer-events: none;
}

#burger.open ~ #closeBurger {
    opacity: 0.9;
    pointer-events: auto;
}

#closeBurger {
    transition: opacity 0.25s ease;
}

#closeBurger:hover {
    opacity: 1 !important;
}

#closeBurger:active {
    transform: scale(0.92);
}

@media (max-width: 768px) {
  #bonus-balance {
    font-size: 1rem;
  }
  #get-bonuses-btn {
    padding: 0.5rem 1rem;
    font-size: 0.95rem;
  }
  h1 .ml-auto {
    margin-left: 0 !important;
    width: 100%;
    justify-content: center;
    margin-top: 0.5rem;
  }
}


@media (min-width: 769px) {
  h1 > .ml-auto {
    margin-left: auto;
  }
}
    </style>
</head>
<body class="min-h-screen">

<header class="sticky top-0 z-30 bg-white/70 backdrop-blur-md shadow-sm">
    <div class="max-w-6xl mx-auto flex items-center justify-between p-4">
        <h1 class="text-2xl md:text-3xl font-bold flex items-center gap-3 flex-wrap">
            <span class="text-2xl">Chai Caffe</span>
        </h1>
        <nav class="flex items-center justify-center flex-1 gap-4 max-md:gap-3">
            <button data-section="about" class="px-4 py-2 rounded-md hover:bg-green-50 transition whitespace-nowrap" data-i18n="about">Биз жөнүндө</button>
            <button data-section="menu" class="px-4 py-2 rounded-md hover:bg-green-50 transition whitespace-nowrap" data-i18n="menu">Меню</button>
            <button data-section="contact" class="px-4 py-2 rounded-md hover:bg-green-50 transition whitespace-nowrap" data-i18n="contact">Байланыш</button>


            <div class="hidden md:flex items-center gap-5">
        <span id="bonus-balance-desktop"
              class="text-lg font-medium text-gray-700 whitespace-nowrap"
              data-i18n="bonus_balance_label">
            Бонус балансы: <span id="bonus-amount">0</span>
        </span>


                <button id="get-bonuses-btn"
                        onclick="window.location.href='/client/bonuses.html'"
                        class="px-5 py-2.5 btn-primary rounded-full font-semibold whitespace-nowrap transition-transform hover:scale-105">
                    Бонус алуу
                </button>
            </div>


            <div class="flex md:hidden flex-col items-center gap-4 w-full max-w-xs mx-auto">
                <div class="py-3 text-center">
            <span class="text-lg font-medium text-gray-700"
                  data-i18n="bonus_balance_label">
                Бонус балансы: <span id="bonus-amount-mobile">0</span>
            </span>
                </div>


                <button id="get-bonuses-btn-mobile"
                        onclick="window.location.href='/client/bonuses.html'"
                        class="w-full py-3 btn-primary rounded-full font-semibold text-base">
                    Бонус алуу
                </button>
            </div>


            <select id="langSelect" class="ml-4 px-3 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-amber-400 max-md:hidden">
                <option value="kg">KG</option>
                <option value="en">EN</option>
            </select>


            <div class="lang-toggle-mobile hidden max-md:flex items-center gap-3 mt-4">
                <button type="button" class="lang-btn-m px-5 py-2.5 text-sm font-medium rounded-full transition-all" data-lang="kg">KG</button>
                <span class="text-gray-400">/</span>
                <button type="button" class="lang-btn-m px-5 py-2.5 text-sm font-medium rounded-full transition-all" data-lang="en">EN</button>
            </div>
        </nav>

        <div class="relative md:hidden">
            <button type="button" id="burger" class="burger z-50">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <button type="button" id="closeBurger" class="absolute inset-0 flex items-center justify-center z-50 opacity-0 pointer-events-none transition-opacity">
                <svg class="w-7 h-7" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="1.6" stroke-linecap="round">
                    <path d="M6 18L18 6" />
                    <path d="M6 6l12 12" />
                </svg>
            </button>
        </div>
    </div>
</header>

<div class="relative overflow-hidden bg-gradient-to-r from-amber-50 to-orange-50">
    <div id="promoCarousel" class="flex transition-transform duration-700 ease-in-out" style="transform: translateX(0)">

        <div class="min-w-full relative">
            <img src="https://i.pinimg.com/736x/33/44/b4/3344b471b8ae59206338a60703ed541b.jpg"
                 alt="Tea promotion" class="w-full h-96 object-cover brightness-75">
            <div class="absolute inset-0 flex items-center justify-center">
                <div class="text-center px-8 py-6 rounded-2xl bg-black/40 backdrop-blur-sm max-w-2xl">
                    <h2 class="text-4xl md:text-6xl font-bold mb-3 drop-shadow-2xl text-white"
                        data-i18n-promo="promo1_title"
                        style="text-shadow: 0 2px 10px rgba(0,0,0,0.7);">
                        Бардык чайга –20%!
                    </h2>
                    <p class="text-xl md:text-2xl drop-shadow-lg text-white font-medium"
                       data-i18n-promo="promo1_sub"
                       style="text-shadow: 0 2px 8px rgba(0,0,0,0.7);">
                        10-декабрга чейин гана
                    </p>
                </div>
            </div>
        </div>

        <div class="min-w-full relative">
            <img src="https://i.pinimg.com/736x/bc/4a/88/bc4a8859a2496dcd52ae7fad80d35627.jpg"
                 alt="Dessert promotion" class="w-full h-96 object-cover brightness-75">
            <div class="absolute inset-0 flex items-center justify-center">
                <div class="text-center px-8 py-6 rounded-2xl bg-black/40 backdrop-blur-sm max-w-2xl">
                    <h2 class="text-4xl md:text-6xl font-bold mb-3 drop-shadow-2xl text-white"
                        data-i18n-promo="promo2_title"
                        style="text-shadow: 0 2px 10px rgba(0,0,0,0.7);">
                        2 десерт = 1 баасы
                    </h2>
                    <p class="text-xl md:text-2xl drop-shadow-lg text-white font-medium"
                       data-i18n-promo="promo2_sub"
                       style="text-shadow: 0 2px 8px rgba(0,0,0,0.7);">
                        1000 сомдон жогору заказга
                    </p>
                </div>
            </div>
        </div>

        <div class="min-w-full relative">
            <img src="https://i.pinimg.com/736x/db/6c/86/db6c86048584f07559af974e5030c5b5.jpg"
                 alt="Winter menu" class="w-full h-96 object-cover brightness-75">
            <div class="absolute inset-0 flex items-center justify-center">
                <div class="text-center px-8 py-6 rounded-2xl bg-black/40 backdrop-blur-sm max-w-2xl">
                    <h2 class="text-4xl md:text-6xl font-bold mb-3 drop-shadow-2xl text-white"
                        data-i18n-promo="promo3_title"
                        style="text-shadow: 0 2px 10px rgba(0,0,0,0.7);">
                        Кышкы меню келди!
                    </h2>
                    <p class="text-xl md:text-2xl drop-shadow-lg text-white font-medium"
                       data-i18n-promo="promo3_sub"
                       style="text-shadow: 0 2px 8px rgba(0,0,0,0.7);">
                        Ысык шоколад жана имбир чай ♡
                    </p>
                </div>
            </div>
        </div>
    </div>

    <button id="prevSlide" class="absolute left-4 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white rounded-full p-4 shadow-xl transition z-10">
        ←
    </button>
    <button id="nextSlide" class="absolute right-4 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white rounded-full p-4 shadow-xl transition z-10">
        →
    </button>
    <div class="absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-3">
        <span class="dot w-3 h-3 bg-white rounded-full cursor-pointer transition hover:scale-125"></span>
        <span class="dot w-3 h-3 bg-white/70 rounded-full cursor-pointer transition hover:scale-125"></span>
        <span class="dot w-3 h-3 bg-white/70 rounded-full cursor-pointer transition hover:scale-125"></span>
    </div>
</div>

<main class="max-w-6xl mx-auto px-4 sm:px-6 md:px-8">

    <section id="about" class="mb-12" data-aos="fade-up">
        <div class="rounded-2xl overflow-hidden shadow-2xl ">
            <img src="https://i.pinimg.com/736x/28/99/a0/2899a036a783be92b19a8cdbfa6e0636.jpg"
                 alt="Chai Caffe Interior"
                 class="w-full h-96 md:h-[500px] lg:h-[600px] object-cover object-center">
            <div class="p-8 bg-white">
                <h2 class="text-4xl md:text-5xl font-bold mb-4" data-i18n="about_title">Chai Caffe</h2>
                <p class="text-gray-700 text-base md:text-lg leading-relaxed" data-i18n="about_text"></p>
            </div>
        </div>
    </section>


    <section id="menu" class="mb-12">
        <div id="categories" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 "></div>

        <div id="itemsBlock" class="mt-6 hidden">
            <button id="backToCats" class="mb-4 px-4 py-2 btn-primary rounded-full">← Back to categories</button>
            <div id="itemsList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>
    </section>

    <section id="contact" class="mb-12 hidden">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="bg-white rounded-2xl p-6 shadow-lg">
                <h2 class="text-3xl font-bold mb-4" data-i18n="contact_title">Байланыш</h2>
                <p>
                    Instagram: <a href="https://instagram.com/chai.caffe" target="_blank" class="text-amber-600">@chai.caffe</a><br>
                    WhatsApp: <a href="https://wa.me/996" target="_blank" class="text-amber-600">+996 709 853 999</a><br>
                    Address: г. Бишкек, ул. Токтогула 75
                </p>
            </div>

            <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                <iframe class="w-full h-96"
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d5848.123456789!2d74.590123!3d42.874621!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNDLCsDUyJzI5LjYiTiA3NMKwMzUnMjQuNCJF!5e0!3m2!1sen!2skg!4v..."
                        loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
        </div>
    </section>
</main>

<footer class="p-6 text-center text-gray-600">
    © 2025 Chai Caffe • @chai.caffe • Күн сайын 08:00 – 23:00 Сени күтөбүз ♡
    Daily 08:00 – 23:00 We’re waiting for you ♡
</footer>

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
    AOS.init({ once: true, duration: 900 });
    const API_BASE = '/api/client';
    let lang = localStorage.getItem('lang') || 'kg';
    let categoriesData = [];
    let currentItems = [];
    let loadingCategory = false;

const i18n = {
  kg: {
    about: 'Биз жөнүндө',
    about_title: 'Chai Caffe',
    about_text: 'Chai caffe — бул шаардын борборунда жайгашкан уюттуу жер, анда ароматтуу кофе жана салттуу чай кезигет. Биз бардык ингредиенттерди таза жана табигый колдонуп даярдайбыз. Биздин автордук чай менен эс алыңыз, өз колуңуз менен жасалган десерттерди татып көрүңүз жана жылуу атмосферадан ырахат алыңыз. Биз сизди кубаныч менен күтөбүз!',
    menu: 'Меню',
    contact: 'Байланыш',
    contact_title: 'Байланыш',

    promo1_title: "Бардык чайга –20%!",
    promo1_sub: "10-декабрга чейин гана",
    promo2_title: "2 десерт = 1 баасы",
    promo2_sub: "1000 сомдон жогору заказга",
    promo3_title: "Кышкы меню келди!",
    promo3_sub: "Ысык шоколад жана имбир чай ♡",

    get_bonuses: "Бонус алуу",
    bonus_balance_label: "Бонус балансы"
  },
  en: {
    about: 'About us',
    about_title: 'Chai Caffe',
    about_text: 'Chai caffe is a cozy place in the heart of the city where aromatic coffee meets traditional tea. We prepare with love using only fresh, natural ingredients. Relax with our signature tea, try homemade desserts, and enjoy the warm atmosphere. We are happy to welcome you!',
    menu: 'Menu',
    contact: 'Contact',
    contact_title: 'Contact',

    promo1_title: "–20% on all tea!",
    promo1_sub: "Only until December 10",
    promo2_title: "2 desserts = 1 price",
    promo2_sub: "For orders over 1000 som",
    promo3_title: "Winter menu is here!",
    promo3_sub: "Hot chocolate & ginger tea ♡",

    get_bonuses: "Get Bonuses",
    bonus_balance_label: "Bonus Balance"
  }
};

    function animateIn(el){
      el.classList.remove('fade-slide-leave','fade-slide-leave-active');
      el.classList.add('fade-slide-enter');
      requestAnimationFrame(()=>{
        el.classList.add('fade-slide-enter-active');
        setTimeout(()=>el.classList.remove('fade-slide-enter','fade-slide-enter-active'),400);
      });
    }
    function animateOut(el, cb){
      el.classList.remove('fade-slide-enter','fade-slide-enter-active');
      el.classList.add('fade-slide-leave');
      requestAnimationFrame(()=>{
        el.classList.add('fade-slide-leave-active');
        setTimeout(()=>{
          el.classList.remove('fade-slide-leave','fade-slide-leave-active');
          cb && cb();
        },320);
      });
    }

    const elements = document.querySelectorAll('[data-i18n]');
    const langSelect = document.getElementById('langSelect');
    const categoriesContainer = document.getElementById('categories');
    const itemsBlock = document.getElementById('itemsBlock');
    const itemsList = document.getElementById('itemsList');
    const backBtn = document.getElementById('backToCats');

    function applyI18n(){
      elements.forEach(el=>{
        const key = el.dataset.i18n;
        if(!key) return;
        el.innerHTML = (i18n[lang] && i18n[lang][key]) ? i18n[lang][key] : (i18n['en'][key] || key);
      });
    }

const setLanguage = (newLang) => {
    lang = newLang;
    localStorage.setItem('lang', lang);
    langSelect.value = lang;

    document.querySelectorAll('.lang-btn-m').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
    });

    applyI18n();
    updatePromoTexts();
    if (!itemsBlock.classList.contains('hidden')) renderItems();
    else renderCategories();
};


langSelect.value = lang;
langSelect.addEventListener('change', (e) => setLanguage(e.target.value));

document.querySelectorAll('.lang-btn-m').forEach(btn => {
    btn.addEventListener('click', () => setLanguage(btn.dataset.lang));
    if (btn.dataset.lang === lang) btn.classList.add('active');
});

updatePromoTexts();

    applyI18n();

function updatePromoTexts() {
  document.querySelectorAll('[data-i18n-promo]').forEach(el => {
    const key = el.getAttribute('data-i18n-promo');
    const text = i18n[lang][key] || i18n['en'][key] || key;
    el.textContent = text;
  });
}

    document.querySelectorAll('button[data-section]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const id = btn.dataset.section;
        ['about','menu','itemsBlock','contact'].forEach(s=>{
          const el = document.getElementById(s);
          if(!el) return;
          if(s === id) {
            el.classList.remove('hidden');
            animateIn(el);
          } else {
            el.classList.add('hidden');
          }
        });

        if(id === 'menu'){
          itemsBlock.classList.add('hidden');
          categoriesContainer.classList.remove('hidden');
        }
      });
    });

    async function fetchCategories(){
      try{
        const res = await fetch(`${API_BASE}/categories`);
        const data = await res.json();
        categoriesData = Array.isArray(data) ? data : [];
        renderCategories();
      }catch(err){
        console.error('fetchCategories error', err);
        categoriesData = [];
        categoriesContainer.innerHTML = `<div class="text-red-600 p-4">Ошибка загрузки категорий</div>`;
      }
    }

    function renderCategories(){
      categoriesContainer.innerHTML = '';
      itemsBlock.classList.add('hidden');
      categoriesContainer.classList.remove('hidden');
      // animate container
      animateIn(categoriesContainer);

      if(!categoriesData.length){
        categoriesContainer.innerHTML = `<div class="p-6 bg-white rounded-2xl shadow text-gray-600">Категорий нет</div>`;
        return;
      }

      categoriesData.forEach(cat=>{
        const name = (lang === 'kg' ? (cat.name_kg || cat.name_en) : (cat.name_en || cat.name_kg));
        const img = cat.image_url || '/assets/placeholder.png';
        const card = document.createElement('div');
        card.className = 'bg-white rounded-2xl p-4 shadow menu-card cursor-pointer flex flex-col items-center';
        card.innerHTML = `
          <img src="${img}" alt="${escapeHtml(name)}" class="w-full h-40 object-cover rounded-lg mb-3">
          <h3 class="text-lg font-semibold text-center">${escapeHtml(name)}</h3>
        `;

        card.addEventListener('click', ()=> onCategoryClick(cat.id, card));
        categoriesContainer.appendChild(card);
      });
    }

    function escapeHtml(s){ return String(s||'').replace(/[&<>"']/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[c])); }

    async function onCategoryClick(categoryId, clickedCard){
      if(loadingCategory) return;
      loadingCategory = true;

      categoriesContainer.classList.add('hidden');
      itemsBlock.classList.remove('hidden');
      itemsList.innerHTML = `<div class="col-span-full p-6 bg-white rounded-2xl shadow text-gray-500">Loading...</div>`;
      itemsBlock.style.opacity = 0;
      requestAnimationFrame(()=> {
        itemsBlock.style.transition = 'opacity .32s ease, transform .32s ease';
        itemsBlock.style.transform = 'translateY(8px)';
        itemsBlock.style.opacity = 1;
        setTimeout(()=> itemsBlock.style.transform = 'none', 20);
      });

      try{
        const res = await fetch(`${API_BASE}/items/${categoryId}`);
        const data = await res.json();
        currentItems = Array.isArray(data) ? data : [];
        renderItems(); // render with currentItems
      }catch(err){
        console.error('loadItems error', err);
        itemsList.innerHTML = `<div class="col-span-full p-6 bg-white rounded-2xl shadow text-red-600">Ошибка загрузки блюд</div>`;
      } finally {
        loadingCategory = false;
      }
    }

    function renderItems(){
      itemsList.innerHTML = '';
      if(!currentItems.length){
        itemsList.innerHTML = `<div class="col-span-full p-6 bg-white rounded-2xl shadow text-gray-600">Блюд нет</div>`;
        return;
      }

      currentItems.forEach(item=>{
        const name = (lang === 'kg' ? (item.name_kg || item.name_en) : (item.name_en || item.name_kg));
        const desc = (lang === 'kg' ? (item.description_kg || item.description_en || '') : (item.description_en || item.description_kg || ''));
        const img = item.image_url || '/assets/placeholder.png';
        const priceLabel = (lang === 'kg' ? 'Баасы' : 'Price');
        const price = item.price ?? '---';

        const card = document.createElement('div');
        card.className = 'bg-white rounded-2xl p-4 shadow menu-card';
        card.innerHTML = `
          <div class="w-full h-44 md:h-36 overflow-hidden rounded-lg mb-3">
            <img src="${img}" alt="${escapeHtml(name)}" class="w-full h-full object-cover">
          </div>
          <h4 class="font-semibold text-lg mb-1">${escapeHtml(name)}</h4>
          <p class="text-sm text-gray-600 mb-3">${escapeHtml(desc)}</p>
          <div class="mt-auto font-medium">${priceLabel}: ${escapeHtml(price)} сом</div>
        `;

        card.style.opacity = 0;
        card.style.transform = 'translateY(12px)';
        itemsList.appendChild(card);

        const idx = itemsList.children.length;
        setTimeout(()=> {
          card.style.transition = 'opacity .36s ease, transform .36s ease';
          card.style.opacity = 1;
          card.style.transform = 'none';
        }, 40 * idx);
      });

      itemsBlock.scrollIntoView({behavior:'smooth', block:'start'});
    }
    backBtn.addEventListener('click', ()=>{
      // animate hide itemsBlock quickly
      itemsBlock.style.transition = 'opacity .28s ease, transform .28s ease';
      itemsBlock.style.opacity = 0;
      itemsBlock.style.transform = 'translateY(10px)';
      setTimeout(()=>{
        itemsBlock.classList.add('hidden');
        // show categories again
        renderCategories();
        // reset current items
        currentItems = [];
      }, 300);
    });

const carousel = document.getElementById('promoCarousel');
const slides = carousel.children;
const dots = document.querySelectorAll('.dot');
let currentSlide = 0;
const totalSlides = slides.length;

function updateCarousel() {
  carousel.style.transform = `translateX(-${currentSlide * 100}%)`;
  dots.forEach((dot, i) => {
    dot.style.backgroundColor = i === currentSlide ? 'white' : 'rgba(255,255,255,0.6)';
    dot.style.transform = i === currentSlide ? 'scale(1.3)' : 'scale(1)';
  });
}

document.getElementById('nextSlide').addEventListener('click', () => {
  currentSlide = (currentSlide + 1) % totalSlides;
  updateCarousel();
});

document.getElementById('prevSlide').addEventListener('click', () => {
  currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
  updateCarousel();
});

dots.forEach((dot, i) => {
  dot.addEventListener('click', () => {
    currentSlide = i;
    updateCarousel();
  });
});

setInterval(() => {
  currentSlide = (currentSlide + 1) % totalSlides;
  updateCarousel();
}, 6000);

updateCarousel();

    fetchCategories();
    const burger = document.getElementById('burger');
    const closeBurger = document.getElementById('closeBurger');
    const nav = document.querySelector('header nav');

    if (burger && closeBurger && nav) {

        burger.addEventListener('click', () => {
            burger.classList.toggle('open');
            nav.classList.toggle('open');
        });

        closeBurger.addEventListener('click', () => {
            burger.classList.remove('open');
            nav.classList.remove('open');
        });
        document.querySelectorAll('header nav button[data-section]').forEach(btn => {
            btn.addEventListener('click', () => {
                if (window.innerWidth <= 768) {
                    burger.classList.remove('open');
                    nav.classList.remove('open');
                }
            });
        });

document.querySelectorAll('#bonus-amount, #bonus-amount-mobile').forEach(el => {
    el.textContent = localStorage.getItem('bonusAmount') || '0';
});


function updateBonusAmount(newAmount) {
    const amount = newAmount.toString();
    localStorage.setItem('bonusAmount', amount);
    document.querySelectorAll('#bonus-amount, #bonus-amount-mobile').forEach(el => {
        el.textContent = amount;
    });
}

window.addEventListener('bonusUpdated', () => {
    const amount = localStorage.getItem('bonusAmount') || '0';
    document.querySelectorAll('#bonus-amount, #bonus-amount-mobile').forEach(el => {
        el.textContent = amount;
    });
});
}

</script>
</body>
</html>
